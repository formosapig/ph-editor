# your_character_project/game_data/body_data.py

BODY_DETAILS = {
    # 皮膚
    'skin': [
        {'id': 0, 'name': {'ja': 'タイプ01', 'zh': '類型01'}},
        {'id': 1, 'name': {'ja': 'タイプ02', 'zh': '類型02'}},
        {'id': 2, 'name': {'ja': 'タイプ03', 'zh': '類型03'}},
        {'id': 3, 'name': {'ja': 'タイプ04', 'zh': '類型04'}},
        {'id': 4, 'name': {'ja': 'タイプ05', 'zh': '類型05'}},
        {'id': 5, 'name': {'ja': 'タイプ06', 'zh': '類型06'}},
        {'id': 6, 'name': {'ja': 'タイプ07', 'zh': '類型07'}},
    ],
    # 乳首
    'nipples': [
        {'id': 0, 'name': {'ja': 'タイプ01', 'zh': '類型01'}},
        {'id': 1, 'name': {'ja': 'タイプ02', 'zh': '類型02'}},
        {'id': 2, 'name': {'ja': 'タイプ03', 'zh': '類型03'}},
        {'id': 3, 'name': {'ja': 'タイプ04', 'zh': '類型04'}},
        {'id': 4, 'name': {'ja': 'タイプ05', 'zh': '類型05'}},
        {'id': 5, 'name': {'ja': 'タイプ06', 'zh': '類型06'}},
    ],
    # 陰毛
    'pubic_hair': [
        {'id': 5, 'name': {'ja': 'なし', 'zh': '無'}},
        {'id': 0, 'name': {'ja': 'タイプ01', 'zh': '類型01'}},
        {'id': 1, 'name': {'ja': 'タイプ02', 'zh': '類型02'}},
        {'id': 2, 'name': {'ja': 'タイプ03', 'zh': '類型03'}},
        {'id': 3, 'name': {'ja': 'タイプ04', 'zh': '類型04'}},
        {'id': 4, 'name': {'ja': 'タイプ05', 'zh': '類型05'}},
        {'id': 6, 'name': {'ja': 'タイプ06', 'zh': '類型06'}},
        {'id': 7, 'name': {'ja': 'タイプ07', 'zh': '類型07'}},
    ],
    # 曬痕
    'tan_lines': [
        {'id':   0, 'name': {'ja': 'なし', 'zh': '無'}},
        {'id':   1, 'name': {'ja': 'ビキニラインA', 'zh': '比基尼線A'}},
        {'id':   2, 'name': {'ja': 'ビキニラインB', 'zh': '比基尼線B'}},
        {'id':   3, 'name': {'ja': 'マイクロビキニラインA', 'zh': '微比基尼線A'}},
        {'id':   4, 'name': {'ja': 'マイクロビキニラインB', 'zh': '微比基尼線B'}},
        {'id':   5, 'name': {'ja': 'チューブトップライン', 'zh': '平口線'}},
        {'id':   6, 'name': {'ja': 'スクールライン', 'zh': '學院線'}},
        {'id':   7, 'name': {'ja': '競泳ライン', 'zh': '競泳線'}},
        {'id':   8, 'name': {'ja': 'モノキニライン', 'zh': '單基尼線'}},
        {'id':   9, 'name': {'ja': 'Vライン', 'zh': 'V型線'}},
        {'id':  10, 'name': {'ja': 'キャミソールとショートパンツ', 'zh': '吊帶背心和短褲'}},
        {'id':  11, 'name': {'ja': '半袖とハーフパンツ', 'zh': '短袖和五分褲'}},
        {'id':  12, 'name': {'ja': 'チューブワンピースライン', 'zh': '平口連身裙線'}},
        {'id':  13, 'name': {'ja': 'ランジェリーライン', 'zh': '內衣線'}},
        {'id':  14, 'name': {'ja': '亀甲ライン', 'zh': '龜甲線'}},
    ],
    # 刺青
    'tattoo': [
        {'id':   0, 'name': {'ja': 'なし', 'zh': '無'}},
        {'id': 500, 'name': {'ja': '胸アザ', 'zh': '胸部瘀青'}},
        {'id': 501, 'name': {'ja': '背中アザ', 'zh': '背部瘀青'}},
        {'id': 502, 'name': {'ja': 'お腹アザ', 'zh': '腹部瘀青'}},
        {'id': 503, 'name': {'ja': '尻アザ', 'zh': '臀部瘀青'}},
        {'id': 504, 'name': {'ja': '腕アザ', 'zh': '手臂瘀青'}},
        {'id': 505, 'name': {'ja': '足アザ', 'zh': '腿部瘀青'}},
        {'id': 506, 'name': {'ja': '全身アザ(少)', 'zh': '全身瘀青(少)'}},
        {'id': 507, 'name': {'ja': '全身アザ(多)', 'zh': '全身瘀青(多)'}},
        {'id':   1, 'name': {'ja': '火炎', 'zh': '火傷'}},
        {'id':   2, 'name': {'ja': '蝶1', 'zh': '蝶1'}},
        {'id':   3, 'name': {'ja': '蝶2', 'zh': '蝶2'}},
        {'id':   4, 'name': {'ja': 'サンセットホテル', 'zh': '日落飯店'}},
        {'id':   5, 'name': {'ja': '猫1', 'zh': '貓1'}},
        {'id':   6, 'name': {'ja': '猫2', 'zh': '貓2'}},
        {'id':   7, 'name': {'ja': '星1', 'zh': '星1'}},
        {'id':   8, 'name': {'ja': '星2', 'zh': '星2'}},
        {'id':   9, 'name': {'ja': 'ドルフくん', 'zh': '多爾夫君'}},
        {'id':  10, 'name': {'ja': 'ハート1', 'zh': '愛心1'}},
        {'id':  11, 'name': {'ja': 'ハート2', 'zh': '愛心2'}},
        {'id':  12, 'name': {'ja': '鎖1', 'zh': '鎖1'}},
        {'id':  13, 'name': {'ja': '鎖2', 'zh': '鎖2'}},
        {'id':  14, 'name': {'ja': '卍', 'zh': '卍'}},
        {'id':  15, 'name': {'ja': '命', 'zh': '命'}},
        {'id':  16, 'name': {'ja': '愛', 'zh': '愛'}},
        {'id':  17, 'name': {'ja': '正の字1', 'zh': '正字1'}},
        {'id':  18, 'name': {'ja': '正の字2', 'zh': '正字2'}},
        {'id':  19, 'name': {'ja': 'バーコード', 'zh': '條碼'}},
        {'id':  21, 'name': {'ja': 'バーコード(首)', 'zh': '條碼(頸)'}},
        {'id':  22, 'name': {'ja': 'バーコード(腕)', 'zh': '條碼(腕)'}},
        {'id':  20, 'name': {'ja': '電子回路(体)', 'zh': '電子電路(身體)'}},
    ],
}

def get_localized_name(name_dict, lang):
    '''日文優先（預設為 ja），找不到才退回中文（zh）'''
    # 這裡直接引用 face_data.py 中的相同邏輯，確保一致性
    return name_dict.get(lang) or name_dict.get('ja') or name_dict.get('zh') or '???'

def get_body_by_id(category: str, item_id: int, lang: str = 'ja') -> str:
    '''
    根據類別和ID獲取身體部位的本地化名稱。
    僅支持單一ID (int)。
    '''
    if not isinstance(item_id, int):
        raise TypeError(f'Find {category} with invalid item_id type: {item_id!r}')

    candidates = BODY_DETAILS.get(category, [])

    for item in candidates:
        if item.get('id') == item_id:
            return get_localized_name(item['name'], lang)

    # 找不到時的訊息
    id_repr = str(item_id)
    not_found_messages = {
        'ja': f'身体設定ID {id_repr} が見つかりません',
        'zh': f'找不到身體設定 ID {id_repr}',
    }
    return not_found_messages.get(lang, f'Body ID {id_repr} not found')

def get_body_detail_type(category: str, item_id: int | tuple[int, int]) -> str:
    '''
    根據類別和ID獲取身體部位的類型（例如，對於id (500, 7) 可能代表 PH 類型）。
    這個函數的實作會根據您的具體需求和 ID 命名規則來定。
    目前先簡單返回 ID 的字符串表示，如果 ID 有特殊含義（如 (500, X) 代表 PH），
    則需要更複雜的邏輯來解析。
    '''
    candidates = BODY_DETAILS.get(category, [])

    for item in candidates:
        if item.get('id') == item_id:
            # 這裡需要根據您的 ID 命名規則來判斷類型
            # 例如，如果所有以 500 開頭的 ID 都代表 'PH' 類型
            if isinstance(item_id, int) and item_id >= 500 and item_id < 600:
                return "PH Type"
            elif isinstance(item_id, tuple) and item_id[0] >= 500 and item_id[0] < 600:
                return "PH Type"
            else:
                # 預設返回類別名稱或者更通用的類型
                return "Standard Type"
    
    # 如果找不到對應的 ID，返回 None 或拋出錯誤
    return None